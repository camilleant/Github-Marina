---
title: "parking analysis"
output: pdf_document
date: "`r format(Sys.Date(), '%B %d, %Y')`" 
geometry: "left=3cm,right=3cm,top=2cm,bottom=2cm"
classoption: landscape
---

```{r setup, include=FALSE}
#knitr::opts_chunk$set(echo = TRUE)
setwd("C:/Users/camil/Documents/Sail/Parking lots/PRA-Intercept survey data-City of Berkeley-2025")
#park24<-read.csv("park24.csv")
load("park24.Rda")
library(readxl)    
library(dplyr)
library(tidyverse)
library(magrittr)
library(zipcodeR)
library(Hmisc)
library(doBy)
library(psych)

```

## Lot Existing Capacity

```{r echo = FALSE}
col1 <- c("D&E",  "Spinnaker Way Lot", "Marina Blvd",  "Spinnaker Way", "F, G, H, & I Lot", "J&K lot",   
          "South Cove East /West Lot",  "L&M3 Lot",  "O Lot",  "Seawall Drive",  "Skates/N Lot", "Total")
col2<- as.numeric(c(129, 36, 150, 127, 115, 92, 182, 91, 72, 90, 137, 1221) )
col3<-(col2/1221)*100
col3 <- sprintf("%.2f", col3)
df <- data.frame(Lot = col1, ExistingCapacity = col2, Percent=col3)
print(df)

```

## Sample, N=459

```{r echo = FALSE}
summary <- park24 %>%
  group_by(location) %>%
  dplyr::summarise(
    Count = n(),
    Percent = (n()/459)*100
  )
print(summary, n=21)
```

\newpage

## Tables by area and income

"South" refers to South Cove East and West lots, J&K, L&M, Skates/N, O lot, and Seawall Drive.  I did not include data points from the 199 Seawall Lot for HsL restaurant as the gates are usually locked so that the lot if inaccessible.  "North" refers to D&E, F&G, Spinnaker Way and Spinnaker Circle. 
"Other" refers to Marina Blvd, H&I and the paid launch ramp lot. Plus any reference to 199 Seawall and random notes (including those who biked.) 



```{r table, echo=FALSE}
mytable<-table(park24$area, park24$inc2)
row_percentages <- prop.table(mytable, margin = 1) * 100
row_percentages

```

\newpage

## Tables by income and lot
Of people parking at each lot, what % are in each income bracket?


```{r table1, echo=FALSE}

row_pct <- prop.table(table(park24$location, park24$inclevel), margin = 1) * 100
row_pct_rounded <- round(row_pct, 1)

#camille adding code to get rowsums
tab2<-rowSums(row_pct_rounded)
tabresult<-cbind(row_pct_rounded,Total=tab2)

library(knitr)
kable(tabresult, caption = "Row Percentages (% within each lot)")


```


\newpage

Of people in each income bracket, what % park at each lot?

```{r table2, echo=FALSE}

col_pct <- prop.table(table(park24$location, park24$inclevel), margin = 2) * 100
col_pct_rounded <- round(col_pct, 1)

#camille adding code to get rowsums
tab3<-colSums(col_pct_rounded)
tabresult3<-rbind(col_pct_rounded,Total=tab3)

kable(tabresult3, caption = "Column Percentages (% within each income group)")



```


